<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="false">

  <conversionRule conversionWord="requestId" converterClass="logging.RequestConverter"/>

  <property resource="application.common.conf" />

  <!-- Dev or Travis CI -->
  <property name="app_home" value="."/>
  <!-- Pattern should be shorter since we don't need full year, timezone, complete Request IDs, service/host name, etc.-->
  <property name="PATTERN"                  value="%white(%date{yy-MM-dd'T'HH:mm:ss.SSS}) %highlight(%-5level) %green(%10.10thread) %yellow([%-0.-8requestId]) %cyan(%logger{5}) - %msg%n" />
  <!-- no /data directory there! -->
  <property name="FILE_PATH"                value="${app_home}/logs/app.log" />
  <property name="ROLLING_FILENAME_PATTERN" value="${app_home}/logs/app.%d{yyyy-MM-dd}.log" />

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <withJansi>true</withJansi>
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
      <charset>UTF-8</charset>
      <Pattern>
        ${PATTERN}
      </Pattern>
    </encoder>
  </appender>

  <root level="INFO">
    <!-- TODO: Look into Async appenders for efficiency. -->
    <appender-ref ref="STDOUT" />
  </root>

  <!-- TODO: Define logging levels per environment -->

  <logger name="play" level="INFO" />
  <logger name="application" level="DEBUG" />
  <logger name="utils" level="INFO" />
  <logger name="org.mongodb" level="WARN" />

  <!-- TODO: Split up test logging config-->
  <logger name="de.flapdoodle.embed.mongo.MongodProcess" level="WARN" />
</configuration>
